================================================================================
CODESNAP DEPLOYMENT - COPY & PASTE READY
================================================================================

ALLES in diesem File kann direkt in den Server Terminal kopiert werden!


================================================================================
SCHRITT 1: SSH VERBINDEN
================================================================================

ssh root@45.133.9.167


================================================================================
SCHRITT 2: DEPLOYMENT SCRIPT AUSFÜHREN
================================================================================

chmod +x /root/LernLix/COMPLETE_DEPLOYMENT.sh && /root/LernLix/COMPLETE_DEPLOYMENT.sh


================================================================================
SCHRITT 3: WARTEN (5-10 Minuten)
================================================================================

Das Script macht automatisch ALLES:
✓ Git Pull
✓ Backend npm install
✓ Frontend npm install + build
✓ Database Setup
✓ Database Seeding (Quests, Skills, Achievements)
✓ PM2 Start Backend
✓ Permissions setzen


================================================================================
SCHRITT 4: NACH DEPLOYMENT - ÜBERPRÜFUNGEN (Kopiere einen nach dem anderen)
================================================================================

--- CHECK 1: Backend Status ---
pm2 status

--- CHECK 2: API Health ---
curl http://localhost:3001/api/health

--- CHECK 3: Backend Logs (falls fehler) ---
pm2 logs lernlix-backend


================================================================================
SCHRITT 5: IM BROWSER TESTEN
================================================================================

http://telliix.de
oder
http://45.133.9.167


================================================================================
SCHNELLE TESTS
================================================================================

--- Test 1: Sign Up ---
1. Gehe zu http://telliix.de
2. Klick "Sign Up"
3. Füll aus:
   Full Name: Test User
   Email: test@example.com
   Password: Password123
   Confirm: Password123
4. Klick "Sign Up Free"

--- Test 2: Nach Login ---
1. Klick "Enter RPG Dashboard"
2. Du solltest sehen:
   - ⭐ Total XP: 0
   - 🪙 Coins: 0
   - 🔥 Streak: 0 days
   - 🏆 Quests Done: 0

--- Test 3: Complete Quest ---
1. Scrolle zu "Daily Quests"
2. Klick "Complete Quest" auf einer Quest
3. Du solltest Alert sehen: "Quest completed! +100 XP, +50 Coins"


================================================================================
FALLS FEHLER: NOTFALL BEFEHLE
================================================================================

--- Fehler: Connection refused ---
pm2 restart lernlix-backend
sleep 5
curl http://localhost:3001/api/health

--- Fehler: 502 Bad Gateway ---
systemctl restart nginx
systemctl status nginx

--- Fehler: Database connection error ---
systemctl status postgresql
systemctl start postgresql
pm2 restart lernlix-backend

--- Fehler: npm command not found ---
apt-get update
apt-get install -y nodejs npm
/root/LernLix/COMPLETE_DEPLOYMENT.sh

--- NOTFALL: Alles killen und neu starten ---
pm2 kill
pkill -9 node
sleep 2
pm2 start /root/LernLix/backend/src/server.js --name lernlix-backend
pm2 save


================================================================================
MONITORING (Optional)
================================================================================

--- Logs live anschauen ---
pm2 logs lernlix-backend --lines 50 --follow

--- PM2 Info ---
pm2 info lernlix-backend

--- CPU/Memory Monitor ---
pm2 monit


================================================================================
DATABASE BACKUP (Optional)
================================================================================

--- PostgreSQL Dump ---
pg_dump -U lernlix_user -d lernlix > /root/lernlix_backup.sql

--- Restore ---
psql -U lernlix_user -d lernlix < /root/lernlix_backup.sql


================================================================================
NGINX CHECK (Optional)
================================================================================

--- Nginx Config testen ---
nginx -t

--- Nginx neu starten ---
systemctl restart nginx

--- Nginx Logs anschauen ---
tail -f /var/log/nginx/error.log


================================================================================
PM2 MANAGEMENT
================================================================================

--- Alle Prozesse zeigen ---
pm2 list

--- Backend neustarten ---
pm2 restart lernlix-backend

--- Backend stoppen ---
pm2 stop lernlix-backend

--- Backend starten ---
pm2 start /root/LernLix/backend/src/server.js --name lernlix-backend

--- Alle PM2 Prozesse killen ---
pm2 kill

--- PM2 speichern (Auto-Start bei Server Reboot) ---
pm2 save
pm2 startup


================================================================================
SYSTEM COMMANDS
================================================================================

--- Server Uptime anschauen ---
uptime

--- Disk Usage ---
df -h

--- Memory Usage ---
free -h

--- Running Processes ---
ps aux | grep node

--- Open Ports ---
netstat -tuln | grep LISTEN

--- Kill Process on Port 3001 ---
lsof -ti:3001 | xargs kill -9


================================================================================
GIT COMMANDS
================================================================================

--- Latest Code pullen ---
cd /root/LernLix
git pull origin main

--- Git Status ---
git status

--- Git Log (last 5 commits) ---
git log --oneline -5


================================================================================
SEKRETÄRE TIPPS
================================================================================

--- Alles auf einmal (wenn du es gut kennst) ---
cd /root/LernLix && git pull origin main && pm2 kill && sleep 2 && chmod +x COMPLETE_DEPLOYMENT.sh && ./COMPLETE_DEPLOYMENT.sh

--- Backend schnell neustarten ---
pm2 restart lernlix-backend && pm2 logs lernlix-backend

--- Komplette System Info ---
echo "=== SYSTEM ===" && uname -a && echo "" && echo "=== NODE ===" && node -v && npm -v && echo "" && echo "=== PM2 ===" && pm2 status && echo "" && echo "=== POSTGRESQL ===" && psql --version

--- Alles in eine Datei loggen ---
/root/LernLix/COMPLETE_DEPLOYMENT.sh 2>&1 | tee /root/deployment_log.txt


================================================================================
WICHTIGE INFO
================================================================================

Server: 45.133.9.167
Domain: telliix.de
Database: lernlix
DB User: lernlix_user
DB Password: postgres123
Backend Port: 3001
Frontend Port: 80 (via Nginx)

PostgreSQL Service: postgresql
Nginx Service: nginx
Node Backend: PM2 (lernlix-backend)


================================================================================
NACH ERFOLGREICHEM DEPLOYMENT
================================================================================

✅ Backend läuft auf Port 3001
✅ Frontend erreichbar auf telliix.de
✅ Database mit Seeds gefüllt
✅ 6 Quests verfügbar
✅ 8 Skills zum Freischalten
✅ 6 Achievements
✅ User Registration & Login funktioniert
✅ RPG Dashboard aktiv


================================================================================
NEXT STEPS (Nach erfolgreicher Deployment)
================================================================================

Phase 3: Learning Modules
- Kurse mit Lektionen
- Video/Text Content
- Progress Tracking

Phase 4: Code Challenges
- Live Code Editor
- Testing Framework
- Leaderboards

Phase 5: Premium Design
- Modern UI/UX
- Animations
- Mobile Responsive

Phase 6: Paywall System
- Free/Premium Tiers
- Subscription Management
- Payment Gateway


================================================================================
SUPPORT
================================================================================

Falls etwas nicht funktioniert:
1. Schau die Logs: pm2 logs lernlix-backend
2. Check Backend: curl http://localhost:3001/api/health
3. Check Database: psql -U lernlix_user -d lernlix -c "SELECT 1;"
4. Check Nginx: systemctl status nginx

Bei Fragen/Problemen: Zeig mir die PM2 Logs!

================================================================================
VIEL ERFOLG! 🚀⚡
================================================================================
